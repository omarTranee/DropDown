
@using DropDown.Models
@model DropDown.Models.Country
@{
    ViewBag.Title = "Index";
    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
}
<script>
    $(function () {
        $("#ContID").change(function () {
            $.get("/DropDownC/GetStatesByID",
                { ID: $("#ContID").val() },
                function (data) {
                    $("#St").empty();
                    $("#city").empty();
                    $.each(data,
                        function (index, row) {
                            $("#St").append("<option value='" + row.state_id + "'>" + row.name + "</option>");
                        });
                });
        });

        $("#St").change(function () {
            $.get("/DropDownC/GetCityByID",
                { ID: $("#St").val() },
                function (data) {
                    $("#city").empty();
                    $.each(data,
                        function (index, row) {
                            $("#city").append(`<option value="${row.id}">${row.name}</option>`);
                        });
                });
        });
    });
</script>

<h2>Index</h2>
@using (Html.BeginForm("GetClinic","DropDownC",FormMethod.Post))
{
    
    @*@Html.DropDownListFor(p=>p.id, ViewBag.CountryName as SelectList
        , "Select Your Country", new { id = "ContID", name="countreyId", @class = "form-control"  })*@
    
<select class="form-control" id="ContID" name="counteryId">
    <option value="-1">Choose Country </option>
    @foreach (var count in (List<Country>)ViewBag.CountryName)
    {
        
        <option value="@count.id">@count.name</option>

    }
</select>


    <select id="St" class="form-control" name="stateId">
    </select>
    <select id="city" class="form-control" name="cityId">
    </select>

    @*@Html.DropDownList("Category", ViewBag.CategoryName as SelectList
        , "Select Your Category", new { id = "CaID", @class = "form-control" , name="CaID" })*@
    <select class="form-control"  id="CaID" name="catid"> 
        <option value="-1">Choose Category </option>
        @foreach (var count  in  (List<Category>) ViewBag.CategoryName)
        {
            <option value="@count.Id">@count.Name </option>

        }
    </select>

    @*@Html.ActionLink("Submit","GetClinic","DropDownC",new{@id="St",CategoryId="CaID"})*@
    <div class="form-group">
        <input type="submit" class="btn btn-success" value="Get Data"/>
    </div>
}
